import{r as e,u as a,l as s,a as l,b as o,c as n,E as r,d as t,o as u,e as d,f as m,w as c,g as i,h as p,i as g,j as f,k as v,m as _,n as h,p as b,q as w,s as y,t as V,v as x,x as I,y as C,z as L,A as R,B as k,_ as U,C as q,D as F}from"./index-499eded3.js";const j=["src"],z=U(t({__name:"loginForm",setup(t){const U=e({username:"admin",password:"123456",code:"nmt6"}),{captchaImg:q,handleGetCaptcha:F}=function(){const s=e("");return{captchaImg:s,handleGetCaptcha:async()=>{const{data:e}=await a.getCaptcha();s.value="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e)))}}}(),{rememberMe:z,handleRemember:G,getLocalLoginInfo:M}=function(a){const l=e(!1),o="isRemember";return{rememberMe:l,handleRemember:()=>{const{username:e,password:n}=a.value;l.value?s.set(o,{username:e,password:n}):s.remove(o)},getLocalLoginInfo:()=>{const e=s.get(o);e&&(a.value.username=e.username,a.value.password=e.password,l.value=!0)}}}(U),{rules:A,loginFormRef:B,btnLoading:D,handleLogin:E}=function(s,t,u){const d=n(),m=l(),c=e(),i=e(!1),p=o({username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:5,message:"用户名长度在3 ~ 5之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]});return{loginFormRef:c,btnLoading:i,rules:p,handleLogin:async e=>{e&&await e.validate((async e=>{if(e){const{username:e,password:o,code:n}=s.value;t();try{i.value=!0;const{data:s}=await a.login({username:e,password:o,code:n});m.setToken(s.token),m.setUserInfo(s.userInfo),d.push("/"),r({type:"success",title:"登录成功",message:`欢迎回来，${s.userInfo.username}`,showClose:!0,offset:0,duration:3e3})}catch(l){u(),s.value.code=""}finally{i.value=!1}}}))}}}(U,G,F);return u((()=>{F(),M()})),(e,a)=>{const s=y,l=V,o=x,n=I,r=C,t=L,u=R,G=k;return d(),m(G,{ref_key:"loginFormRef",ref:B,size:"large",model:U.value,rules:p(A),onKeyup:a[6]||(a[6]=w((e=>p(E)(p(B))),["enter"]))},{default:c((()=>[i(o,{prop:"username"},{default:c((()=>[i(l,{modelValue:U.value.username,"onUpdate:modelValue":a[0]||(a[0]=e=>U.value.username=e),clearable:"",placeholder:"请输入用户名"},{prefix:c((()=>[i(s,null,{default:c((()=>[i(p(g))])),_:1})])),_:1},8,["modelValue"])])),_:1}),i(o,{prop:"password"},{default:c((()=>[i(l,{modelValue:U.value.password,"onUpdate:modelValue":a[1]||(a[1]=e=>U.value.password=e),clearable:"","show-password":"",placeholder:"请输入密码"},{prefix:c((()=>[i(s,null,{default:c((()=>[i(p(f))])),_:1})])),_:1},8,["modelValue"])])),_:1}),i(o,{prop:"code"},{default:c((()=>[i(r,{style:{width:"100%"}},{default:c((()=>[i(n,{span:16},{default:c((()=>[i(l,{modelValue:U.value.code,"onUpdate:modelValue":a[2]||(a[2]=e=>U.value.code=e),clearable:"",placeholder:"请输入验证码"},{prefix:c((()=>[i(s,null,{default:c((()=>[i(p(v))])),_:1})])),_:1},8,["modelValue"])])),_:1}),i(n,{span:8},{default:c((()=>[_("img",{class:"captcha-img",src:p(q),alt:"",onClick:a[3]||(a[3]=(...e)=>p(F)&&p(F)(...e))},null,8,j)])),_:1})])),_:1})])),_:1}),i(o,{style:{"margin-bottom":"10px"}},{default:c((()=>[i(n,{span:12},{default:c((()=>[i(t,{label:"记住密码",modelValue:p(z),"onUpdate:modelValue":a[4]||(a[4]=e=>h(z)?z.value=e:null)},null,8,["modelValue"])])),_:1})])),_:1}),i(o,null,{default:c((()=>[i(u,{type:"primary",style:{width:"100%"},loading:p(D),onClick:a[5]||(a[5]=e=>p(E)(p(B)))},{default:c((()=>[b("登录")])),_:1},8,["loading"])])),_:1})])),_:1},8,["model","rules"])}}}),[["__scopeId","data-v-5e1a5cc7"]]),G={class:"login_bg"},M={class:"login_main"},A={class:"login-form"},B={class:"login-header"},D={class:"logo"},E={class:"form-container"},K=U(t({__name:"index",setup:e=>(e,a)=>(d(),q("div",G,[_("div",M,[_("div",A,[_("div",B,[_("div",D,[_("label",null,F(p("极简后台管理系统")),1)])]),_("div",E,[i(z)])])])]))}),[["__scopeId","data-v-79d06962"]]);export{K as default};
